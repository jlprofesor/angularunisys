Abrimos el proyecto AngularBasicos
--------------------------------------------------------------------------------------------
ng g c promesas --skip-tests=true
--------------------------------------------------------------------------------------------
--promesas.component.ts

import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'app-promesas',
  templateUrl: './promesas.component.html',
  styleUrls: ['./promesas.component.css']
})
export class PromesasComponent implements OnInit {
  url = './assets/people.json';

  constructor() {}

  ngOnInit() {
    this.getPeople();
    this.getPeopleAsyncAwait();
  }

  getPeople() {
    fetch(this.url)
      .then((resp) => resp.json())
      .then((data) => {
        console.log(data);
      })
      .catch((err) => console.error(err));
  }

  async getPeopleAsyncAwait() {
    try {
      const resp = await fetch(this.url);
      const data = await resp.json();
      console.log(data);
    } catch (error) {
      console.error(error);
    }
  }
}

--------------------------------------------------------------------------------------------
--app.component.html

<app-promesas></app-promesas>

--------------------------------------------------------------------------------------------
ng g c observables --skip-tests=true
--------------------------------------------------------------------------------------------
--observables.component.ts

import { HttpClient } from '@angular/common/http';
import { Component, OnInit } from '@angular/core';
import { Observable } from 'rxjs';
import { map } from 'rxjs/operators';

@Component({
  selector: 'app-observables',
  templateUrl: './observables.component.html',
  styleUrls: ['./observables.component.css']
})
export class ObservablesComponent implements OnInit {
  url = './assets/people.json';

  constructor(private http: HttpClient) {}

  ngOnInit() {
    this.getPeople();
  }

  getPeople() {
    this.getPeopleObservable().subscribe(
      (data) => {
        console.log(data);
      },
      (err) => console.log(err),
      () => console.log('OK')
    );
  }

  getPeopleObservable(): Observable<any[]> {
    // return this.http.get<any[]>(this.url);
    return this.http.get<any[]>(this.url).pipe(
      map((x) => {
        return x.filter((x) => x.nombre.startsWith('A'));
      })
    );
  }
}

--------------------------------------------------------------------------------------------
--app.component.html

<app-observables></app-observables>

--------------------------------------------------------------------------------------------
Nuevo proyecto

ng new AngularServices

ng g c restCountries --skip-tests=true
--------------------------------------------------------------------------------------------
npm install bootstrap --save
--------------------------------------------------------------------------------------------
--angular.json

"styles": [
  "./node_modules/bootstrap/dist/css/bootstrap.min.css",
  "src/styles.css"
],

--------------------------------------------------------------------------------------------
--app.component.html

<div class="container">
  <h1>Acceso a web services con Angular</h1>
  <app-rest-countries></app-rest-countries>
  <hr>
  <footer>Curso Angular 2023</footer>
</div>

--------------------------------------------------------------------------------------------
ng generate service services/restCountries --skip-tests=true 
--------------------------------------------------------------------------------------------
--app.module.ts

import { HttpClientModule } from '@angular/common/http';
.....
  imports: [
    BrowserModule, HttpClientModule
  ],

--------------------------------------------------------------------------------------------
Creamos carpeta interfaces. Dentro, creamos el archivo pais.interface.ts
--------------------------------------------------------------------------------------------
--pais.interface.ts

// Generated by https://quicktype.io

export interface IPais {
  name:         Name;
  tld:          string[];
  cca2:         string;
  ccn3:         string;
  cca3:         string;
  cioc:         string;
  independent:  boolean;
  status:       string;
  unMember:     boolean;
  currencies:   Currencies;
  idd:          Idd;
  capital:      string[];
  altSpellings: string[];
  region:       string;
  subregion:    string;
  languages:    Languages;
  translations: { [key: string]: Translation };
  latlng:       number[];
  landlocked:   boolean;
  borders:      string[];
  area:         number;
  demonyms:     Demonyms;
  flag:         string;
  maps:         Maps;
  population:   number;
  gini:         Gini;
  fifa:         string;
  car:          Car;
  timezones:    string[];
  continents:   string[];
  flags:        Flags;
  coatOfArms:   CoatOfArms;
  startOfWeek:  string;
  capitalInfo:  CapitalInfo;
  postalCode:   PostalCode;
}

export interface CapitalInfo {
  latlng: number[];
}

export interface Car {
  signs: string[];
  side:  string;
}

export interface CoatOfArms {
  png: string;
  svg: string;
}

export interface Currencies {
  TND: Tnd;
}

export interface Tnd {
  name:   string;
  symbol: string;
}

export interface Demonyms {
  eng: Eng;
  fra: Eng;
}

export interface Eng {
  f: string;
  m: string;
}

export interface Flags {
  png: string;
  svg: string;
  alt: string;
}

export interface Gini {
  "2015": number;
}

export interface Idd {
  root:     string;
  suffixes: string[];
}

export interface Languages {
  ara: string;
}

export interface Maps {
  googleMaps:     string;
  openStreetMaps: string;
}

export interface Name {
  common:     string;
  official:   string;
  nativeName: NativeName;
}

export interface NativeName {
  ara: Translation;
}

export interface Translation {
  official: string;
  common:   string;
}

export interface PostalCode {
  format: string;
  regex:  string;
}


--------------------------------------------------------------------------------------------
--rest-countries.service.ts

import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';
import { IPais } from '../interfaces/pais.interface';

@Injectable({
  providedIn: 'root'
})
export class RestCountriesService {
  constructor(private http: HttpClient) {}

  getCountries(): Observable<IPais[]> {
    return this.http.get<IPais[]>('https://restcountries.com/v3.1/all');
  }
}

--------------------------------------------------------------------------------------------
--rest-countries.component.ts

import { Component, OnInit } from '@angular/core';
import { IPais } from '../interfaces/pais.interface';
import { RestCountriesService } from '../services/rest-countries.service';

@Component({
  selector: 'app-rest-countries',
  templateUrl: './rest-countries.component.html',
  styleUrls: ['./rest-countries.component.css']
})
export class RestCountriesComponent implements OnInit {
  paises: IPais[] = [];

  constructor(private restCountriesService: RestCountriesService) {}

  ngOnInit() {
    this.getPaises();
  }

  getPaises() {
    this.restCountriesService.getCountries().subscribe({
      next: (data) => {
        console.log(data);
        this.paises = data;
      },
      error: (err) => console.log(err),
      complete: () => console.log('OK')
    });
  }
}

--------------------------------------------------------------------------------------------
--rest-countries.component.html

<div class="container">
    <select class="form-control">
    <option value="default">Seleccciona país</option>
    <option *ngFor="let pais of paises">
        {{ pais.name.common }}
    </option>
  </select>
</div>

--------------------------------------------------------------------------------------------
Angular Material

ng add @angular/material

--------------------------------------------------------------------------------------------
--app.module.ts

...

import { MatTableModule } from '@angular/material/table';
import { MatSelectModule } from '@angular/material/select';
import { MatPaginatorModule } from '@angular/material/paginator';

...

 imports: [
    BrowserModule,
    HttpClientModule,
    BrowserAnimationsModule,
    MatTableModule,
    MatSelectModule,
    MatPaginatorModule
  ],

--------------------------------------------------------------------------------------------
--rest-countries.component.html

<div class="container">
  <div class="row">
    <!-- <select class="form-control">
      <option value="default">Seleccciona país</option>
      <option *ngFor="let pais of paises">
        {{ pais.name.common }}
      </option>
    </select> -->
    <mat-label>Elige un país</mat-label>
    <mat-select>
      <mat-option *ngFor="let pais of paises" [value]="pais.name.common">{{pais.name.common}}</mat-option>
    </mat-select>
  </div>
  <div class="row mt-2">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" MatPaginator>

      <ng-container matColumnDef="bandera">
        <th mat-header-cell *matHeaderCellDef> País </th>
        <td mat-cell *matCellDef="let pais"><img [src]="pais.flags.png" alt="Bandera de {{pais.name.common}}"
            class="flag" /> </td>
      </ng-container>

      <ng-container matColumnDef="nombre">
        <th mat-header-cell *matHeaderCellDef> País </th>
        <td mat-cell *matCellDef="let pais"> {{pais.name.common}} </td>
      </ng-container>

      <ng-container matColumnDef="capital">
        <th mat-header-cell *matHeaderCellDef> Capital </th>
        <td mat-cell *matCellDef="let pais"> {{pais.capital && pais.capital[0]}} </td>
      </ng-container>

      <ng-container matColumnDef="habitantes">
        <th mat-header-cell *matHeaderCellDef> Habitantes </th>
        <td mat-cell *matCellDef="let pais"><span class="float-end">{{pais.population | number}}</span> </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>
    <mat-paginator #paginator [pageSizeOptions]="[10, 15, 20]" showFirstLastButtons>
    </mat-paginator>
  </div>


</div>
 

--------------------------------------------------------------------------------------------
--rest-countries.component.ts

import { Component, OnInit, ViewChild } from '@angular/core';
import { MatPaginator } from '@angular/material/paginator';
import { MatTableDataSource } from '@angular/material/table';
import { IPais } from '../interfaces/pais.interface';
import { RestCountriesService } from '../services/rest-countries.service';

@Component({
  selector: 'app-rest-countries',
  templateUrl: './rest-countries.component.html',
  styleUrls: ['./rest-countries.component.css']
})
export class RestCountriesComponent implements OnInit {
  @ViewChild(MatPaginator) paginator!: MatPaginator;

  dataSource!: MatTableDataSource<IPais>;
  paises: IPais[] = [];

  displayedColumns: string[] = ['bandera', 'nombre', 'capital', 'habitantes'];

  constructor(private restCountriesService: RestCountriesService) {}

  ngOnInit() {
    this.getPaises();
  }

  getPaises() {
    this.restCountriesService.getCountries().subscribe({
      next: (data) => {
        console.log(data);
        this.paises = data;
        this.dataSource = new MatTableDataSource<IPais>(this.paises);
        this.dataSource.paginator = this.paginator;
      },
      error: (err) => console.log(err),
      complete: () => console.log('OK')
    });
  }
}

--------------------------------------------------------------------------------------------
--rest-countries.component.css

.flag {
  width: 50px;
  height: 25px;
  border: 0.25px solid;
}

--------------------------------------------------------------------------------------------
--People.json

return this.http.get<any[]>('/assets/people.json');

--------------------------------------------------------------------------------------------
ng g c restMeteo --skip-tests=true 
ng g s services/restMeteo --skip-tests=true 
--------------------------------------------------------------------------------------------
En carpeta interfaces, creamos el archivo tiempo.interface.ts
--------------------------------------------------------------------------------------------
--tiempo.interface.ts

// Generated by https://quicktype.io

export interface ITiempo {
  coord: Coord;
  weather: Weather[];
  base: string;
  main: Main;
  visibility: number;
  wind: Wind;
  clouds: Clouds;
  dt: number;
  sys: Sys;
  timezone: number;
  id: number;
  name: string;
  cod: number;
}

export interface Clouds {
  all: number;
}

export interface Coord {
  lon: number;
  lat: number;
}

export interface Main {
  temp: number;
  feels_like: number;
  temp_min: number;
  temp_max: number;
  pressure: number;
  humidity: number;
}

export interface Sys {
  type: number;
  id: number;
  country: string;
  sunrise: number;
  sunset: number;
}

export interface Weather {
  id: number;
  main: string;
  description: string;
  icon: string;
}

export interface Wind {
  speed: number;
  deg: number;
}

--------------------------------------------------------------------------------------------
--rest-meteo.service.ts

import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: 'root'
})

export class RestMeteoService {
  constructor(private http: HttpClient) {}

 getInfoMeteo(latitud: number, longitud: number): Observable<ITiempo> {
    return this.http.get<ITiempo>(
      `http://api.openweathermap.org/data/2.5/forecast/daily?lat=${latitud}&lon=${longitud}&units=metric&lang=es&cnt=10&appid=879afb821f691358d29e6814408339e6`
    );
  }
}

--------------------------------------------------------------------------------------------
--app.component.html

...
  <app-rest-meteo></app-rest-meteo>
...

--------------------------------------------------------------------------------------------
--rest-meteo.component.ts

import { Component, OnInit } from '@angular/core';
import { RestMeteoService } from '../services/rest-meteo.service';
import { ITiempo } from '../interfaces/tiempo.interface';

@Component({
  selector: 'app-rest-meteo',
  templateUrl: './rest-meteo.component.html',
  styleUrls: ['./rest-meteo.component.css']
})
export class RestMeteoComponent implements OnInit {

  infoMeteo: ITiempo;
  latitud: number=0;
  longitud: number=0;

  constructor(private meteoService: RestMeteoService) { }

  ngOnInit() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(position => {
        this.latitud = position.coords.latitude;
        this.longitud = position.coords.longitude;
        this.getInfoMeteo();
      });
    }
  }

  getInfoMeteo() {
     this.meteoService.getInfoMeteo(this.latitud, this.longitud).subscribe({
      next: (data) => {
        console.log(data);
        this.infoMeteo = data;
      },
      error: (err) => console.log(err),
      complete: () => console.log('OK')
    });
  }

}

-------------------------------------------------------------
--rest-meteo.component.html

<h2 *ngIf="infoMeteo">{{ infoMeteo.city.name }}</h2>
<div class="row">
  <div class="col-md-3" *ngFor="let info of infoMeteo?.list">
    <div class="card" style="width: 18rem;">
      <img class="card-img-top" src="http://openweathermap.org/img/w/{{info.weather[0].icon}}.png" alt="weather icon">
      <div class="card-body">
        <h5 class="card-title">{{info.dt *1000 | date: 'mediumDate'}}</h5>
        <h6 class="card-title">{{info.weather[0].description | titlecase}}</h6>
        <span class="badge bg-danger">Máxima {{info.temp.max}}</span>
        <span class="badge bg-primary">Mínima {{info.temp.min}}</span>
      </div>
    </div>
  </div>
</div>

